import{t as T,h as mt,w as W,i as nt,b as _t,B as yt,j as Gt,m as Rt,d as m,k as Xt,r as Ft,n as et,o as It,p as Ut,s as pt,q as bt,v as Nt}from"./math-CqhxGUwT.js";const vt=63710088e-1;function st(n,t,e){e=e||vt;const s=T(n[1]),r=T(t[1]),i=(r-s)/2,o=T(t[0]-n[0])/2,a=Math.sin(i)*Math.sin(i)+Math.sin(o)*Math.sin(o)*Math.cos(s)*Math.cos(r);return 2*e*Math.atan2(Math.sqrt(a),Math.sqrt(1-a))}function At(...n){console.warn(...n)}function Xn(n,t){return n[0]+=+t[0],n[1]+=+t[1],n}function Yt(n,t){let e=!0;for(let s=n.length-1;s>=0;--s)if(n[s]!=t[s]){e=!1;break}return e}function Fn(n,t){const e=Math.cos(t),s=Math.sin(t),r=n[0]*e-n[1]*s,i=n[1]*e+n[0]*s;return n[0]=r,n[1]=i,n}function In(n,t){return n[0]*=t,n[1]*=t,n}function Un(n,t){if(t.canWrapX()){const e=mt(t.getExtent()),s=Ot(n,t,e);s&&(n[0]-=s*e)}return n}function Ot(n,t,e){const s=t.getExtent();let r=0;return t.canWrapX()&&(n[0]<s[0]||n[0]>s[2])&&(e=e||mt(s),r=Math.floor((n[0]-s[0])/e)),r}const Lt={radians:6370997/(2*Math.PI),degrees:2*Math.PI*6370997/360,ft:.3048,m:1,"us-ft":1200/3937};class B{constructor(t){this.code_=t.code,this.units_=t.units,this.extent_=t.extent!==void 0?t.extent:null,this.worldExtent_=t.worldExtent!==void 0?t.worldExtent:null,this.axisOrientation_=t.axisOrientation!==void 0?t.axisOrientation:"enu",this.global_=t.global!==void 0?t.global:!1,this.canWrapX_=!!(this.global_&&this.extent_),this.getPointResolutionFunc_=t.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=t.metersPerUnit}canWrapX(){return this.canWrapX_}getCode(){return this.code_}getExtent(){return this.extent_}getUnits(){return this.units_}getMetersPerUnit(){return this.metersPerUnit_||Lt[this.units_]}getWorldExtent(){return this.worldExtent_}getAxisOrientation(){return this.axisOrientation_}isGlobal(){return this.global_}setGlobal(t){this.global_=t,this.canWrapX_=!!(t&&this.extent_)}getDefaultTileGrid(){return this.defaultTileGrid_}setDefaultTileGrid(t){this.defaultTileGrid_=t}setExtent(t){this.extent_=t,this.canWrapX_=!!(this.global_&&t)}setWorldExtent(t){this.worldExtent_=t}setGetPointResolution(t){this.getPointResolutionFunc_=t}getPointResolutionFunc(){return this.getPointResolutionFunc_}}const U=6378137,y=Math.PI*U,qt=[-y,-y,y,y],$t=[-180,-85,180,85],v=U*Math.log(Math.tan(Math.PI/2));class _ extends B{constructor(t){super({code:t,units:"m",extent:qt,global:!0,worldExtent:$t,getPointResolution:function(e,s){return e/Math.cosh(s[1]/U)}})}}const rt=[new _("EPSG:3857"),new _("EPSG:102100"),new _("EPSG:102113"),new _("EPSG:900913"),new _("http://www.opengis.net/def/crs/EPSG/0/3857"),new _("http://www.opengis.net/gml/srs/epsg.xml#3857")];function Dt(n,t,e,s){const r=n.length;e=e>1?e:2,s=s??e,t===void 0&&(e>2?t=n.slice():t=new Array(r));for(let i=0;i<r;i+=s){t[i]=y*n[i]/180;let o=U*Math.log(Math.tan(Math.PI*(+n[i+1]+90)/360));o>v?o=v:o<-v&&(o=-v),t[i+1]=o}return t}function Wt(n,t,e,s){const r=n.length;e=e>1?e:2,s=s??e,t===void 0&&(e>2?t=n.slice():t=new Array(r));for(let i=0;i<r;i+=s)t[i]=180*n[i]/y,t[i+1]=360*Math.atan(Math.exp(n[i+1]/U))/Math.PI-90;return t}const jt=6378137,it=[-180,-90,180,90],kt=Math.PI*jt/180;class w extends B{constructor(t,e){super({code:t,units:"degrees",extent:it,axisOrientation:e,global:!0,metersPerUnit:kt,worldExtent:it})}}const ot=[new w("CRS:84"),new w("EPSG:4326","neu"),new w("urn:ogc:def:crs:OGC:1.3:CRS84"),new w("urn:ogc:def:crs:OGC:2:84"),new w("http://www.opengis.net/def/crs/OGC/1.3/CRS84"),new w("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new w("http://www.opengis.net/def/crs/EPSG/0/4326","neu")];let j={};function Zt(n){return j[n]||j[n.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null}function zt(n,t){j[n]=t}let G={};function I(n,t,e){const s=n.getCode(),r=t.getCode();s in G||(G[s]={}),G[s][r]=e}function $(n,t){return n in G&&t in G[n]?G[n][t]:null}const A=.9996,E=.00669438,O=E*E,L=O*E,S=E/(1-E),at=Math.sqrt(1-E),R=(1-at)/(1+at),Et=R*R,H=Et*R,J=H*R,Pt=J*R,Mt=1-E/4-3*O/64-5*L/256,Bt=3*E/8+3*O/32+45*L/1024,Ht=15*O/256+45*L/1024,Jt=35*L/3072,Kt=3/2*R-27/32*H+269/512*Pt,Qt=21/16*Et-55/32*J,Vt=151/96*H-417/128*Pt,tn=1097/512*J,Y=6378137;function nn(n,t,e){const s=n-5e5,o=(e.north?t:t-1e7)/A/(Y*Mt),a=o+Kt*Math.sin(2*o)+Qt*Math.sin(4*o)+Vt*Math.sin(6*o)+tn*Math.sin(8*o),c=Math.sin(a),l=c*c,h=Math.cos(a),f=c/h,u=f*f,d=u*u,g=1-E*l,x=Math.sqrt(1-E*l),p=Y/x,b=(1-E)/g,P=S*h**2,X=P*P,M=s/(p*A),N=M*M,F=N*M,V=F*M,tt=V*M,St=tt*M,Tt=a-f/b*(N/2-V/24*(5+3*u+10*P-4*X-9*S))+St/720*(61+90*u+298*P+45*d-252*S-3*X);let q=(M-F/6*(1+2*u+P)+tt/120*(5-2*P+28*u-3*X+8*S+24*d))/h;return q=W(q+T(Ct(e.number)),-Math.PI,Math.PI),[nt(q),nt(Tt)]}const ct=-80,lt=84,en=-180,sn=180;function rn(n,t,e){n=W(n,en,sn),t<ct?t=ct:t>lt&&(t=lt);const s=T(t),r=Math.sin(s),i=Math.cos(s),o=r/i,a=o*o,c=a*a,l=T(n),h=Ct(e.number),f=T(h),u=Y/Math.sqrt(1-E*r**2),d=S*i**2,g=i*W(l-f,-Math.PI,Math.PI),x=g*g,p=x*g,b=p*g,P=b*g,X=P*g,M=Y*(Mt*s-Bt*Math.sin(2*s)+Ht*Math.sin(4*s)-Jt*Math.sin(6*s)),N=A*u*(g+p/6*(1-a+d)+P/120*(5-18*a+c+72*d-58*S))+5e5;let F=A*(M+u*o*(x/2+b/24*(5-a+9*d+4*d**2)+X/720*(61-58*a+c+600*d-330*S)));return e.north||(F+=1e7),[N,F]}function Ct(n){return(n-1)*6-180+3}const on=[/^EPSG:(\d+)$/,/^urn:ogc:def:crs:EPSG::(\d+)$/,/^http:\/\/www\.opengis\.net\/def\/crs\/EPSG\/0\/(\d+)$/];function xt(n){let t=0;for(const r of on){const i=n.match(r);if(i){t=parseInt(i[1]);break}}if(!t)return null;let e=0,s=!1;return t>32700&&t<32761?e=t-32700:t>32600&&t<32661&&(s=!0,e=t-32600),e?{number:e,north:s}:null}function ft(n,t){return function(e,s,r,i){const o=e.length;r=r>1?r:2,i=i??r,s||(r>2?s=e.slice():s=new Array(o));for(let a=0;a<o;a+=i){const c=e[a],l=e[a+1],h=n(c,l,t);s[a]=h[0],s[a+1]=h[1]}return s}}function an(n){return xt(n)?new B({code:n,units:"m"}):null}function cn(n){const t=xt(n.getCode());return t?{forward:ft(rn,t),inverse:ft(nn,t)}:null}const ln=[cn],fn=[an];let k=!0;function pn(n){k=!1}function K(n,t){if(t!==void 0){for(let e=0,s=n.length;e<s;++e)t[e]=n[e];t=t}else t=n.slice();return t}function Z(n){zt(n.getCode(),n),I(n,n,K)}function hn(n){n.forEach(Z)}function C(n){if(typeof n!="string")return n;const t=Zt(n);if(t)return t;for(const e of fn){const s=e(n);if(s)return s}return null}function bn(n,t,e,s){n=C(n);let r;const i=n.getPointResolutionFunc();if(i)r=i(t,e);else{const o=n.getUnits();if(o=="degrees"||s=="degrees")r=t;else{const a=Q(n,C("EPSG:4326"));if(!a&&o!=="degrees")r=t*n.getMetersPerUnit();else{let l=[e[0]-t/2,e[1],e[0]+t/2,e[1],e[0],e[1]-t/2,e[0],e[1]+t/2];l=a(l,l,2);const h=st(l.slice(0,2),l.slice(2,4)),f=st(l.slice(4,6),l.slice(6,8));r=(h+f)/2}const c=n.getMetersPerUnit();c!==void 0&&(r/=c)}}return r}function ht(n){hn(n),n.forEach(function(t){n.forEach(function(e){t!==e&&I(t,e,K)})})}function un(n,t,e,s){n.forEach(function(r){t.forEach(function(i){I(r,i,e),I(i,r,s)})})}function Nn(n,t){return n?typeof n=="string"?C(n):n:C(t)}function vn(n){return function(t,e,s,r){const i=t.length;s=s!==void 0?s:2,r=r??s,e=e!==void 0?e:new Array(i);for(let o=0;o<i;o+=r){const a=n(t.slice(o,o+s)),c=a.length;for(let l=0,h=r;l<h;++l)e[o+l]=l>=c?t[o+l]:a[l]}return e}}function An(n,t){if(n===t)return!0;const e=n.getUnits()===t.getUnits();return(n.getCode()===t.getCode()||Q(n,t)===K)&&e}function Q(n,t){const e=n.getCode(),s=t.getCode();let r=$(e,s);if(r)return r;let i=null,o=null;for(const c of ln)i||(i=c(n)),o||(o=c(t));if(!i&&!o)return null;const a="EPSG:4326";if(o)if(i)r=D(i.inverse,o.forward);else{const c=$(e,a);c&&(r=D(c,o.forward))}else{const c=$(a,s);c&&(r=D(i.inverse,c))}return r&&(Z(n),Z(t),I(n,t,r)),r}function D(n,t){return function(e,s,r,i){return s=n(e,s,r,i),t(s,s,r,i)}}function z(n,t){const e=C(n),s=C(t);return Q(e,s)}function Yn(n,t,e){const s=z(t,e);if(!s){const r=C(t).getCode(),i=C(e).getCode();throw new Error(`No transform available between ${r} and ${i}`)}return s(n,void 0,n.length)}function On(n,t){return n}function Ln(n,t){return k&&!Yt(n,[0,0])&&n[0]>=-180&&n[0]<=180&&n[1]>=-90&&n[1]<=90&&(k=!1,At("Call useGeographic() from ol/proj once to work with [longitude, latitude] coordinates.")),n}function qn(n,t){return n}function $n(n,t){return n}function gn(){ht(rt),ht(ot),un(ot,rt,Dt,Wt)}gn();new Array(6);function dn(){return[1,0,0,1,0,0]}function Dn(n,t){const e=t[0],s=t[1];return t[0]=n[0]*e+n[2]*s+n[4],t[1]=n[1]*e+n[3]*s+n[5],t}function mn(n,t,e,s,r,i,o,a){const c=Math.sin(i),l=Math.cos(i);return n[0]=s*l,n[1]=r*c,n[2]=-s*c,n[3]=r*l,n[4]=o*s*l-a*s*c+t,n[5]=o*r*c+a*r*l+e,n}function Wn(n,t){const e=En(t);_t(e!==0,"Transformation matrix cannot be inverted");const s=t[0],r=t[1],i=t[2],o=t[3],a=t[4],c=t[5];return n[0]=o/e,n[1]=-r/e,n[2]=-i/e,n[3]=s/e,n[4]=(i*c-o*a)/e,n[5]=-(s*c-r*a)/e,n}function En(n){return n[0]*n[3]-n[1]*n[2]}const ut=[1e6,1e6,1e6,1e6,2,2];function jn(n){return"matrix("+n.map((e,s)=>Math.round(e*ut[s])/ut[s]).join(", ")+")"}function Pn(n,t,e,s,r,i,o){i=i||[],o=o||2;let a=0;for(let c=t;c<e;c+=s){const l=n[c],h=n[c+1];i[a++]=r[0]*l+r[2]*h+r[4],i[a++]=r[1]*l+r[3]*h+r[5];for(let f=2;f<o;f++)i[a++]=n[c+f]}return i&&i.length!=a&&(i.length=a),i}function Mn(n,t,e,s,r,i,o){o=o||[];const a=Math.cos(r),c=Math.sin(r),l=i[0],h=i[1];let f=0;for(let u=t;u<e;u+=s){const d=n[u]-l,g=n[u+1]-h;o[f++]=l+d*a-g*c,o[f++]=h+d*c+g*a;for(let x=u+2;x<u+s;++x)o[f++]=n[x]}return o&&o.length!=f&&(o.length=f),o}function Cn(n,t,e,s,r,i,o,a){a=a||[];const c=o[0],l=o[1];let h=0;for(let f=t;f<e;f+=s){const u=n[f]-c,d=n[f+1]-l;a[h++]=c+r*u,a[h++]=l+i*d;for(let g=f+2;g<f+s;++g)a[h++]=n[g]}return a&&a.length!=h&&(a.length=h),a}function xn(n,t,e,s,r,i,o){o=o||[];let a=0;for(let c=t;c<e;c+=s){o[a++]=n[c]+r,o[a++]=n[c+1]+i;for(let l=c+2;l<c+s;++l)o[a++]=n[l]}return o&&o.length!=a&&(o.length=a),o}const gt=dn(),wn=[NaN,NaN];class Sn extends yt{constructor(){super(),this.extent_=Gt(),this.extentRevision_=-1,this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=0,this.simplifyTransformedInternal=Rt((t,e,s)=>{if(!s)return this.getSimplifiedGeometry(e);const r=this.clone();return r.applyTransform(s),r.getSimplifiedGeometry(e)})}simplifyTransformed(t,e){return this.simplifyTransformedInternal(this.getRevision(),t,e)}clone(){return m()}closestPointXY(t,e,s,r){return m()}containsXY(t,e){return this.closestPointXY(t,e,wn,Number.MIN_VALUE)===0}getClosestPoint(t,e){return e=e||[NaN,NaN],this.closestPointXY(t[0],t[1],e,1/0),e}intersectsCoordinate(t){return this.containsXY(t[0],t[1])}computeExtent(t){return m()}getExtent(t){if(this.extentRevision_!=this.getRevision()){const e=this.computeExtent(this.extent_);(isNaN(e[0])||isNaN(e[1]))&&Xt(e),this.extentRevision_=this.getRevision()}return Ft(this.extent_,t)}rotate(t,e){m()}scale(t,e,s){m()}simplify(t){return this.getSimplifiedGeometry(t*t)}getSimplifiedGeometry(t){return m()}getType(){return m()}applyTransform(t){m()}intersectsExtent(t){return m()}translate(t,e){m()}transform(t,e){const s=C(t),r=s.getUnits()=="tile-pixels"?function(i,o,a){const c=s.getExtent(),l=s.getWorldExtent(),h=et(l)/et(c);mn(gt,l[0],l[3],h,-h,0,0,0);const f=Pn(i,0,i.length,a,gt,o),u=z(s,e);return u?u(f,f,a):f}:z(s,e);return this.applyTransform(r),this}}class Tn extends Sn{constructor(){super(),this.layout="XY",this.stride=2,this.flatCoordinates}computeExtent(t){return It(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)}getCoordinates(){return m()}getFirstCoordinate(){return this.flatCoordinates.slice(0,this.stride)}getFlatCoordinates(){return this.flatCoordinates}getLastCoordinate(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)}getLayout(){return this.layout}getSimplifiedGeometry(t){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&t<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;const e=this.getSimplifiedGeometryInternal(t);return e.getFlatCoordinates().length<this.flatCoordinates.length?e:(this.simplifiedGeometryMaxMinSquaredTolerance=t,this)}getSimplifiedGeometryInternal(t){return this}getStride(){return this.stride}setFlatCoordinates(t,e){this.stride=dt(t),this.layout=t,this.flatCoordinates=e}setCoordinates(t,e){m()}setLayout(t,e,s){let r;if(t)r=dt(t);else{for(let i=0;i<s;++i){if(e.length===0){this.layout="XY",this.stride=2;return}e=e[0]}r=e.length,t=_n(r)}this.layout=t,this.stride=r}applyTransform(t){this.flatCoordinates&&(t(this.flatCoordinates,this.flatCoordinates,this.layout.startsWith("XYZ")?3:2,this.stride),this.changed())}rotate(t,e){const s=this.getFlatCoordinates();if(s){const r=this.getStride();Mn(s,0,s.length,r,t,e,s),this.changed()}}scale(t,e,s){e===void 0&&(e=t),s||(s=Ut(this.getExtent()));const r=this.getFlatCoordinates();if(r){const i=this.getStride();Cn(r,0,r.length,i,t,e,s,r),this.changed()}}translate(t,e){const s=this.getFlatCoordinates();if(s){const r=this.getStride();xn(s,0,s.length,r,t,e,s),this.changed()}}}function _n(n){let t;return n==2?t="XY":n==3?t="XYZ":n==4&&(t="XYZM"),t}function dt(n){let t;return n=="XY"?t=2:n=="XYZ"||n=="XYM"?t=3:n=="XYZM"&&(t=4),t}function yn(n,t,e,s){for(let r=0,i=e.length;r<i;++r)n[t++]=e[r];return t}function Gn(n,t,e,s){for(let r=0,i=e.length;r<i;++r){const o=e[r];for(let a=0;a<s;++a)n[t++]=o[a]}return t}function kn(n,t,e,s,r){r=r||[];let i=0;for(let o=0,a=e.length;o<a;++o){const c=Gn(n,t,e[o],s);r[i++]=c,t=c}return r.length=i,r}class wt extends Tn{constructor(t,e){super(),this.setCoordinates(t,e)}clone(){const t=new wt(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t}closestPointXY(t,e,s,r){const i=this.flatCoordinates,o=pt(t,e,i[0],i[1]);if(o<r){const a=this.stride;for(let c=0;c<a;++c)s[c]=i[c];return s.length=a,o}return r}getCoordinates(){return this.flatCoordinates.slice()}computeExtent(t){return bt(this.flatCoordinates,t)}getType(){return"Point"}intersectsExtent(t){return Nt(t,this.flatCoordinates[0],this.flatCoordinates[1])}setCoordinates(t,e){this.setLayout(e,t,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=yn(this.flatCoordinates,0,t,this.stride),this.changed()}}export{Lt as M,wt as P,Tn as S,kn as a,Dn as b,dn as c,Gn as d,mn as e,Nn as f,C as g,Ln as h,$n as i,Xn as j,On as k,qn as l,Wn as m,Yt as n,pn as o,At as p,Yn as q,Fn as r,In as s,jn as t,bn as u,vn as v,Un as w,z as x,An as y};

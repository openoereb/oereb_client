import{j as o}from"./jsx-runtime-D_zvdyIk.js";import{P as b}from"./bootstrap.esm-CK6IUOcm.js";import{P as S}from"./index-DL4eWai9.js";import{r as u}from"./index-F28aNuxU.js";import{a as g}from"./react-redux-DiBVDDrZ.js";import{g as L}from"./language-0ROrJ-Cb.js";import{u as T}from"./useTranslation-HHJENg9B.js";const d=function(e){return Reflect.apply(Object.prototype.hasOwnProperty,e,["NrOfPoints"])?"Point":Reflect.apply(Object.prototype.hasOwnProperty,e,["LengthShare"])?"LineString":Reflect.apply(Object.prototype.hasOwnProperty,e,["AreaShare"])?"Polygon":null},N=function(e){for(var r=[],t=0;t<e.length;t++){const n=d(e[t]);for(var i=!1,a=0;a<r.length;a++)if(r[a].TypeCode===e[t].TypeCode&&r[a].GeomType===n){i=!0,n==="Point"&&(r[a].NrOfPoints+=e[t].NrOfPoints),n==="LineString"&&(r[a].LengthShare+=e[t].LengthShare),n==="Polygon"&&(r[a].AreaShare+=e[t].AreaShare,r[a].PartInPercent+=e[t].PartInPercent);break}if(!i){var c={GeomType:n,TypeCode:e[t].TypeCode,LegendText:e[t].LegendText,SymbolRef:e[t].SymbolRef,SubTheme:e[t].SubTheme};n==="Point"&&(c.NrOfPoints=e[t].NrOfPoints),n==="LineString"&&(c.LengthShare=e[t].LengthShare),n==="Polygon"&&(c.AreaShare=e[t].AreaShare,c.PartInPercent=e[t].PartInPercent),r.push(c)}}return r.sort((n,s)=>(n.AreaShare||0)>(s.AreaShare||0)?-1:(n.AreaShare||0)<(s.AreaShare||0)?1:(n.LengthShare||0)>(s.LengthShare||0)?-1:(n.LengthShare||0)<(s.LengthShare||0)?1:(n.NrOfPoints||0)>(s.NrOfPoints||0)?-1:(n.NrOfPoints||0)<(s.NrOfPoints||0)?1:0)},O=function(e){return d(e)==="Polygon"?e.PartInPercent.toFixed(1)+"%":null},j=function(e){const r=d(e);return r==="Point"?e.NrOfPoints.toFixed(0):r==="LineString"?e.LengthShare.toFixed(0)+" m":r==="Polygon"?o.jsxs("span",{children:[e.AreaShare.toFixed(0)," m",o.jsx("sup",{children:"2"})]}):null},m=function(e){const{t:r}=T(),t=g(l=>l.language),i=t.current,a=t.default,c=g(l=>l.symbolZoom).enabled,n=e.restrictions,s=u.useRef(null),x=N(n).map((l,p)=>{const f=L(l.LegendText,i,a),h=l.SymbolRef,P=j(l),y=O(l);return o.jsxs("tr",{children:[o.jsx("td",{className:"oereb-client-symbol-cell",children:o.jsx("img",{className:"oereb-client-symbol",src:h})}),o.jsx("td",{className:"oereb-client-legend-text",children:f}),o.jsx("td",{className:"oereb-client-legend-text text-end text-nowrap",children:P}),o.jsx("td",{className:"oereb-client-legend-text text-end text-nowrap",children:y})]},p)});return u.useEffect(()=>{s.current.querySelectorAll(".oereb-client-symbol").forEach(p=>{const f=p.getAttribute("src"),h=new b(p,{content:'<img src="'+f+'" />',html:!0,trigger:"hover"});c?h.enable():h.disable()})}),o.jsxs("table",{className:"table table-sm mb-2 oereb-client-legend",children:[o.jsx("thead",{children:o.jsxs("tr",{children:[o.jsx("th",{children:r("extract.topic.legend.type")}),o.jsx("th",{}),o.jsx("th",{className:"text-end text-nowrap",children:r("extract.topic.legend.part")}),o.jsx("th",{className:"text-end text-nowrap",children:r("extract.topic.legend.part_in_percent")})]})}),o.jsx("tbody",{ref:s,children:x})]})};m.propTypes={restrictions:S.array.isRequired};m.__docgenInfo={description:"This component contains the legend for a certain topic.",methods:[],displayName:"OerebLegend",props:{restrictions:{description:"The restrictions to show the legend for.",type:{name:"array"},required:!0}}};export{m as O};
